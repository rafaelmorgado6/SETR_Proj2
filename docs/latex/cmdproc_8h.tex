\doxysection{src/modules/cmdproc.h File Reference}
\hypertarget{cmdproc_8h}{}\label{cmdproc_8h}\index{src/modules/cmdproc.h@{src/modules/cmdproc.h}}


Base code for Unit Testing.  


\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{cmdproc_8h_a7e4912ef6d5612f8ebca463ff206d9ce}{UART\+\_\+\+RX\+\_\+\+SIZE}}~20  /\texorpdfstring{$\ast$}{*} Maximum size of the RX buffer \texorpdfstring{$\ast$}{*}/
\item 
\#define \mbox{\hyperlink{cmdproc_8h_a7bd31e3844f5461db2cbe6d906ca4040}{UART\+\_\+\+TX\+\_\+\+SIZE}}~20  /\texorpdfstring{$\ast$}{*} Maximum size of the TX buffer \texorpdfstring{$\ast$}{*}/
\item 
\#define \mbox{\hyperlink{cmdproc_8h_a98ce42a3f4332d00581da3291c9865cb}{SOF\+\_\+\+SYM}}~\textquotesingle{}\#\textquotesingle{}         /\texorpdfstring{$\ast$}{*} Start of Frame Symbol \texorpdfstring{$\ast$}{*}/
\item 
\#define \mbox{\hyperlink{cmdproc_8h_a87045860c979c33b7bb6e4f90e7914df}{EOF\+\_\+\+SYM}}~\textquotesingle{}!\textquotesingle{}          /\texorpdfstring{$\ast$}{*} End of Frame Symbol \texorpdfstring{$\ast$}{*}/
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{cmdproc_8h_afbdfe0465dfd34a5f244fe41fa27c12a}{cmd\+Processor}} (void)
\begin{DoxyCompactList}\small\item\em Processes received commands and generates responses. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_a67ae8a79a708a3c5471668bddbd16400}{rx\+Char}} (unsigned char car)
\begin{DoxyCompactList}\small\item\em Receives a character and stores it in the receive buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_abdb4363f0662688850bbcdfb59ce4566}{tx\+Char}} (unsigned char car)
\begin{DoxyCompactList}\small\item\em Transmits a character and stores it in the transmit buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8h_a918f38a7eecdd03671d28a3a07f94856}{reset\+Rx\+Buffer}} (void)
\begin{DoxyCompactList}\small\item\em Resets the UART receive buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8h_abd91ad9b5887f4769f45823899583bab}{reset\+Tx\+Buffer}} (void)
\begin{DoxyCompactList}\small\item\em Resets the UART transmit buffer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{cmdproc_8h_a8beeddde9a644610c72724be856db6dd}{get\+Tx\+Buffer}} (unsigned char \texorpdfstring{$\ast$}{*}buf, int \texorpdfstring{$\ast$}{*}len)
\begin{DoxyCompactList}\small\item\em Gets the current size of the UART transmit buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_a2a0e03d8d8ff0f0459f7623ffd6d39b1}{calc\+Checksum}} (unsigned char \texorpdfstring{$\ast$}{*}buf, int nbytes)
\begin{DoxyCompactList}\small\item\em Calculates a checksum for a given data buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_ae6665ae6de1e573ec1d5bb72e0ea5d04}{read\+Temp\+Sensor}} (void)
\begin{DoxyCompactList}\small\item\em Reads a simulated temperature sensor value. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_ad1bdb4081f1dc05be19f7d1b9a7307b6}{read\+Humid\+Sensor}} (void)
\begin{DoxyCompactList}\small\item\em Reads a simulated humidity sensor value. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_a31e38459fe1478dcb9eaaecd26058616}{read\+CO2\+Sensor}} (void)
\begin{DoxyCompactList}\small\item\em Reads a simulated CO2 sensor value. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_a257f53fb5eb850ccbf3ac26a614b152e}{get\+Rx\+Buffer\+Size}} (void)
\begin{DoxyCompactList}\small\item\em Gets the current size of the UART receive buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{cmdproc_8h_a2397dd1c9b60734d3afa3f3a48d47822}{get\+Tx\+Buffer\+Size}} (void)
\begin{DoxyCompactList}\small\item\em Gets the current size of the UART transmit buffer. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Base code for Unit Testing. 

\begin{DoxyVerb} Simple example of command processor 
for a smart sensor node with 3 sensors.
\end{DoxyVerb}


\begin{DoxyAuthor}{Author}
Pedro Ramos, n.\+ยบ 107348 

Rafael Morgado, n.\+ยบ 104277 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
06/04/2025 
\end{DoxyDate}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{cmdproc_8h_a87045860c979c33b7bb6e4f90e7914df}\index{cmdproc.h@{cmdproc.h}!EOF\_SYM@{EOF\_SYM}}
\index{EOF\_SYM@{EOF\_SYM}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{EOF\_SYM}{EOF\_SYM}}
{\footnotesize\ttfamily \label{cmdproc_8h_a87045860c979c33b7bb6e4f90e7914df} 
\#define EOF\+\_\+\+SYM~\textquotesingle{}!\textquotesingle{}          /\texorpdfstring{$\ast$}{*} End of Frame Symbol \texorpdfstring{$\ast$}{*}/}

\Hypertarget{cmdproc_8h_a98ce42a3f4332d00581da3291c9865cb}\index{cmdproc.h@{cmdproc.h}!SOF\_SYM@{SOF\_SYM}}
\index{SOF\_SYM@{SOF\_SYM}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{SOF\_SYM}{SOF\_SYM}}
{\footnotesize\ttfamily \label{cmdproc_8h_a98ce42a3f4332d00581da3291c9865cb} 
\#define SOF\+\_\+\+SYM~\textquotesingle{}\#\textquotesingle{}         /\texorpdfstring{$\ast$}{*} Start of Frame Symbol \texorpdfstring{$\ast$}{*}/}

\Hypertarget{cmdproc_8h_a7e4912ef6d5612f8ebca463ff206d9ce}\index{cmdproc.h@{cmdproc.h}!UART\_RX\_SIZE@{UART\_RX\_SIZE}}
\index{UART\_RX\_SIZE@{UART\_RX\_SIZE}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{UART\_RX\_SIZE}{UART\_RX\_SIZE}}
{\footnotesize\ttfamily \label{cmdproc_8h_a7e4912ef6d5612f8ebca463ff206d9ce} 
\#define UART\+\_\+\+RX\+\_\+\+SIZE~20  /\texorpdfstring{$\ast$}{*} Maximum size of the RX buffer \texorpdfstring{$\ast$}{*}/}

\Hypertarget{cmdproc_8h_a7bd31e3844f5461db2cbe6d906ca4040}\index{cmdproc.h@{cmdproc.h}!UART\_TX\_SIZE@{UART\_TX\_SIZE}}
\index{UART\_TX\_SIZE@{UART\_TX\_SIZE}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{UART\_TX\_SIZE}{UART\_TX\_SIZE}}
{\footnotesize\ttfamily \label{cmdproc_8h_a7bd31e3844f5461db2cbe6d906ca4040} 
\#define UART\+\_\+\+TX\+\_\+\+SIZE~20  /\texorpdfstring{$\ast$}{*} Maximum size of the TX buffer \texorpdfstring{$\ast$}{*}/}



\doxysubsection{Function Documentation}
\Hypertarget{cmdproc_8h_a2a0e03d8d8ff0f0459f7623ffd6d39b1}\index{cmdproc.h@{cmdproc.h}!calcChecksum@{calcChecksum}}
\index{calcChecksum@{calcChecksum}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{calcChecksum()}{calcChecksum()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a2a0e03d8d8ff0f0459f7623ffd6d39b1} 
int calc\+Checksum (\begin{DoxyParamCaption}\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{buf}{, }\item[{int}]{nbytes}{}\end{DoxyParamCaption})}



Calculates a checksum for a given data buffer. 


\begin{DoxyParams}{Parameters}
{\em buf} & Pointer to data buffer \\
\hline
{\em nbytes} & Number of bytes to process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Computed checksum value 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_afbdfe0465dfd34a5f244fe41fa27c12a}\index{cmdproc.h@{cmdproc.h}!cmdProcessor@{cmdProcessor}}
\index{cmdProcessor@{cmdProcessor}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{cmdProcessor()}{cmdProcessor()}}
{\footnotesize\ttfamily \label{cmdproc_8h_afbdfe0465dfd34a5f244fe41fa27c12a} 
int cmd\+Processor (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Processes received commands and generates responses. 

\begin{DoxyReturn}{Returns}
Status code (0 on success, negative on failure) 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_a257f53fb5eb850ccbf3ac26a614b152e}\index{cmdproc.h@{cmdproc.h}!getRxBufferSize@{getRxBufferSize}}
\index{getRxBufferSize@{getRxBufferSize}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{getRxBufferSize()}{getRxBufferSize()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a257f53fb5eb850ccbf3ac26a614b152e} 
int get\+Rx\+Buffer\+Size (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Gets the current size of the UART receive buffer. 

\begin{DoxyReturn}{Returns}
Number of bytes in the receive buffer 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_a8beeddde9a644610c72724be856db6dd}\index{cmdproc.h@{cmdproc.h}!getTxBuffer@{getTxBuffer}}
\index{getTxBuffer@{getTxBuffer}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{getTxBuffer()}{getTxBuffer()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a8beeddde9a644610c72724be856db6dd} 
void get\+Tx\+Buffer (\begin{DoxyParamCaption}\item[{unsigned char \texorpdfstring{$\ast$}{*}}]{buf}{, }\item[{int \texorpdfstring{$\ast$}{*}}]{len}{}\end{DoxyParamCaption})}



Gets the current size of the UART transmit buffer. 

\begin{DoxyReturn}{Returns}
Number of bytes in the transmit buffer 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_a2397dd1c9b60734d3afa3f3a48d47822}\index{cmdproc.h@{cmdproc.h}!getTxBufferSize@{getTxBufferSize}}
\index{getTxBufferSize@{getTxBufferSize}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{getTxBufferSize()}{getTxBufferSize()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a2397dd1c9b60734d3afa3f3a48d47822} 
int get\+Tx\+Buffer\+Size (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Gets the current size of the UART transmit buffer. 

\begin{DoxyReturn}{Returns}
Number of bytes in the transmit buffer 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_a31e38459fe1478dcb9eaaecd26058616}\index{cmdproc.h@{cmdproc.h}!readCO2Sensor@{readCO2Sensor}}
\index{readCO2Sensor@{readCO2Sensor}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{readCO2Sensor()}{readCO2Sensor()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a31e38459fe1478dcb9eaaecd26058616} 
int read\+CO2\+Sensor (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Reads a simulated CO2 sensor value. 

\begin{DoxyReturn}{Returns}
Current CO2 reading 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_ad1bdb4081f1dc05be19f7d1b9a7307b6}\index{cmdproc.h@{cmdproc.h}!readHumidSensor@{readHumidSensor}}
\index{readHumidSensor@{readHumidSensor}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{readHumidSensor()}{readHumidSensor()}}
{\footnotesize\ttfamily \label{cmdproc_8h_ad1bdb4081f1dc05be19f7d1b9a7307b6} 
int read\+Humid\+Sensor (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Reads a simulated humidity sensor value. 

\begin{DoxyReturn}{Returns}
Current humidity reading 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_ae6665ae6de1e573ec1d5bb72e0ea5d04}\index{cmdproc.h@{cmdproc.h}!readTempSensor@{readTempSensor}}
\index{readTempSensor@{readTempSensor}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{readTempSensor()}{readTempSensor()}}
{\footnotesize\ttfamily \label{cmdproc_8h_ae6665ae6de1e573ec1d5bb72e0ea5d04} 
int read\+Temp\+Sensor (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Reads a simulated temperature sensor value. 

\begin{DoxyReturn}{Returns}
Current temperature reading 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_a918f38a7eecdd03671d28a3a07f94856}\index{cmdproc.h@{cmdproc.h}!resetRxBuffer@{resetRxBuffer}}
\index{resetRxBuffer@{resetRxBuffer}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{resetRxBuffer()}{resetRxBuffer()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a918f38a7eecdd03671d28a3a07f94856} 
void reset\+Rx\+Buffer (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Resets the UART receive buffer. 

\Hypertarget{cmdproc_8h_abd91ad9b5887f4769f45823899583bab}\index{cmdproc.h@{cmdproc.h}!resetTxBuffer@{resetTxBuffer}}
\index{resetTxBuffer@{resetTxBuffer}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{resetTxBuffer()}{resetTxBuffer()}}
{\footnotesize\ttfamily \label{cmdproc_8h_abd91ad9b5887f4769f45823899583bab} 
void reset\+Tx\+Buffer (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Resets the UART transmit buffer. 

\Hypertarget{cmdproc_8h_a67ae8a79a708a3c5471668bddbd16400}\index{cmdproc.h@{cmdproc.h}!rxChar@{rxChar}}
\index{rxChar@{rxChar}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{rxChar()}{rxChar()}}
{\footnotesize\ttfamily \label{cmdproc_8h_a67ae8a79a708a3c5471668bddbd16400} 
int rx\+Char (\begin{DoxyParamCaption}\item[{unsigned char}]{car}{}\end{DoxyParamCaption})}



Receives a character and stores it in the receive buffer. 


\begin{DoxyParams}{Parameters}
{\em car} & Character to receive \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 if buffer is full 
\end{DoxyReturn}
\Hypertarget{cmdproc_8h_abdb4363f0662688850bbcdfb59ce4566}\index{cmdproc.h@{cmdproc.h}!txChar@{txChar}}
\index{txChar@{txChar}!cmdproc.h@{cmdproc.h}}
\doxysubsubsection{\texorpdfstring{txChar()}{txChar()}}
{\footnotesize\ttfamily \label{cmdproc_8h_abdb4363f0662688850bbcdfb59ce4566} 
int tx\+Char (\begin{DoxyParamCaption}\item[{unsigned char}]{car}{}\end{DoxyParamCaption})}



Transmits a character and stores it in the transmit buffer. 


\begin{DoxyParams}{Parameters}
{\em car} & Character to transmit \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 if buffer is full 
\end{DoxyReturn}
