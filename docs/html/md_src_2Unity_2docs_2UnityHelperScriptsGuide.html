<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMD Processor - SETR: Unity Helper Scripts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CMD Processor - SETR<span id="projectnumber">&#160;1.2</span>
   </div>
   <div id="projectbrief">Second Project for the SETR class of 2024-2025 at Universidade of Aveiro</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_src_2Unity_2docs_2UnityHelperScriptsGuide.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Unity Helper Scripts</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md315"></a></p>
<h1><a class="anchor" id="autotoc_md316"></a>
With a Little Help From Our Friends</h1>
<p>Sometimes what it takes to be a really efficient C programmer is a little non-C. The Unity project includes a couple of Ruby scripts for making your life just a tad easier. They are completely optional. If you choose to use them, you'll need a copy of Ruby, of course. Just install whatever the latest version is, and it is likely to work. You can find Ruby at <a href="https://ruby-lang.org/">ruby-lang.org</a>.</p>
<h2><a class="anchor" id="autotoc_md317"></a>
<code>generate_test_runner.rb</code></h2>
<p>Are you tired of creating your own <code>main</code> function in your test file? Do you keep forgetting to add a <code>RUN_TEST</code> call when you add a new test case to your suite? Do you want to use CMock or other fancy add-ons but don't want to figure out how to create your own <code>RUN_TEST</code> macro?</p>
<p>Well then we have the perfect script for you!</p>
<p>The <code>generate_test_runner</code> script processes a given test file and automatically creates a separate test runner file that includes ?main?to execute the test cases within the scanned test file. All you do then is add the generated runner to your list of files to be compiled and linked, and presto you're done!</p>
<p>This script searches your test file for void function signatures having a function name beginning with "test" or "spec". It treats each of these functions as a test case and builds up a test suite of them. For example, the following includes three test cases:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> testVerifyThatUnityIsAwesomeAndWillMakeYourLifeEasier(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  ASSERT_TRUE(1);</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> test_FunctionName_should_WorkProperlyAndReturn8(<span class="keywordtype">void</span>) {</div>
<div class="line">  ASSERT_EQUAL_INT(8, FunctionName());</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> spec_Function_should_DoWhatItIsSupposedToDo(<span class="keywordtype">void</span>) {</div>
<div class="line">  ASSERT_NOT_NULL(Function(5));</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can run this script a couple of ways. The first is from the command line:</p>
<div class="fragment"><div class="line">ruby generate_test_runner.rb TestFile.c NameOfRunner.c</div>
</div><!-- fragment --><p>Alternatively, if you include only the test file parameter, the script will copy the name of the test file and automatically append <code>_Runner</code> to the name of the generated file. The example immediately below will create TestFile_Runner.c.</p>
<div class="fragment"><div class="line">ruby generate_test_runner.rb TestFile.c</div>
</div><!-- fragment --><p>You can also add a <a href="http://www.yaml.org/">YAML</a> file to configure extra options. Conveniently, this YAML file is of the same format as that used by Unity and CMock. So if you are using YAML files already, you can simply pass the very same file into the generator script.</p>
<div class="fragment"><div class="line">ruby generate_test_runner.rb TestFile.c my_config.yml</div>
</div><!-- fragment --><p>The contents of the YAML file <code>my_config.yml</code> could look something like the example below. If you're wondering what some of these options do, you're going to love the next section of this document.</p>
<div class="fragment"><div class="line">:unity:</div>
<div class="line">  :includes:</div>
<div class="line">    - stdio.h</div>
<div class="line">    - microdefs.h</div>
<div class="line">  :cexception: 1</div>
<div class="line">  :suite_setup: &quot;blah = malloc(1024);&quot;</div>
<div class="line">  :suite_teardown: &quot;free(blah);&quot;</div>
</div><!-- fragment --><p>If you would like to force your generated test runner to include one or more header files, you can just include those at the command line too. Just make sure these are <em>after</em> the YAML file, if you are using one:</p>
<div class="fragment"><div class="line">ruby generate_test_runner.rb TestFile.c my_config.yml extras.h</div>
</div><!-- fragment --><p>Another option, particularly if you are already using Ruby to orchestrate your builds - or more likely the Ruby-based build tool Rake - is requiring this script directly. Anything that you would have specified in a YAML file can be passed to the script as part of a hash. Let's push the exact same requirement set as we did above but this time through Ruby code directly:</p>
<div class="fragment"><div class="line">require &quot;generate_test_runner.rb&quot;</div>
<div class="line">options = {</div>
<div class="line">  :includes =&gt; [&quot;stdio.h&quot;, &quot;microdefs.h&quot;],</div>
<div class="line">  :cexception =&gt; 1,</div>
<div class="line">  :suite_setup =&gt; &quot;blah = malloc(1024);&quot;,</div>
<div class="line">  :suite_teardown =&gt; &quot;free(blah);&quot;</div>
<div class="line">}</div>
<div class="line">UnityTestRunnerGenerator.new.run(testfile, runner_name, options)</div>
</div><!-- fragment --><p>If you have multiple files to generate in a build script (such as a Rakefile), you might want to instantiate a generator object with your options and call it to generate each runner afterwards. Like thus:</p>
<div class="fragment"><div class="line">gen = UnityTestRunnerGenerator.new(options)</div>
<div class="line">test_files.each do |f|</div>
<div class="line">  gen.run(f, File.basename(f,&#39;.c&#39;)+&quot;Runner.c&quot;</div>
<div class="line">end</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md318"></a>
Options accepted by generate_test_runner.rb</h3>
<p>The following options are available when executing <code>generate_test_runner</code>. You may pass these as a Ruby hash directly or specify them in a YAML file, both of which are described above. In the <code>examples</code> directory, Example 3's Rakefile demonstrates using a Ruby hash.</p>
<h4><a class="anchor" id="autotoc_md319"></a>
<code>:includes</code></h4>
<p>This option specifies an array of file names to be <code>#include</code>'d at the top of your runner C file. You might use it to reference custom types or anything else universally needed in your generated runners.</p>
<h4><a class="anchor" id="autotoc_md320"></a>
<code>:defines</code></h4>
<p>This option specifies an array of definitions to be <code>#define</code>'d at the top of your runner C file. Each definition will be wrapped in an <code>#ifndef</code>.</p>
<h4><a class="anchor" id="autotoc_md321"></a>
<code>:suite_setup</code></h4>
<p>Define this option with C code to be executed <em>before any</em> test cases are run.</p>
<p>Alternatively, if your C compiler supports weak symbols, you can leave this option unset and instead provide a <code>void <a class="el" href="unity_8h.html#a0f08bc53b5978d3892a36f98df005b37">suiteSetUp(void)</a></code> function in your test suite. The linker will look for this symbol and fall back to a Unity-provided stub if it is not found.</p>
<p>This option can also be specified at the command prompt as <code>--suite_setup=""</code></p>
<h4><a class="anchor" id="autotoc_md322"></a>
<code>:suite_teardown</code></h4>
<p>Define this option with C code to be executed <em>after all</em> test cases have finished. An integer variable <code>num_failures</code> is available for diagnostics. The code should end with a <code>return</code> statement; the value returned will become the exit code of <code>main</code>. You can normally just return <code>num_failures</code>.</p>
<p>Alternatively, if your C compiler supports weak symbols, you can leave this option unset and instead provide a <code>int <a class="el" href="unity_8h.html#a3eac1f0f22f9093d82efeed457a1b1d3">suiteTearDown(int num_failures)</a></code> function in your test suite. The linker will look for this symbol and fall back to a Unity-provided stub if it is not found.</p>
<p>This option can also be specified at the command prompt as <code>--suite_teardown=""</code></p>
<h4><a class="anchor" id="autotoc_md323"></a>
<code>:enforce_strict_ordering</code></h4>
<p>This option should be defined if you have the strict order feature enabled in CMock (see CMock documentation). This generates extra variables required for everything to run smoothly. If you provide the same YAML to the generator as used in CMock's configuration, you've already configured the generator properly.</p>
<h4><a class="anchor" id="autotoc_md324"></a>
<code>:externc</code></h4>
<p>This option should be defined if you are mixing C and CPP and want your test runners to automatically include extern "C" support when they are generated.</p>
<p>This option can also be specified at the command prompt as <code>--externc</code></p>
<h4><a class="anchor" id="autotoc_md325"></a>
<code>:mock_prefix</code> and <code>:mock_suffix</code></h4>
<p>Unity automatically generates calls to Init, Verify and Destroy for every file included in the main test file that starts with the given mock prefix and ends with the given mock suffix, file extension not included. By default, Unity assumes a <code>Mock</code> prefix and no suffix.</p>
<h4><a class="anchor" id="autotoc_md326"></a>
<code>:plugins</code></h4>
<p>This option specifies an array of plugins to be used (of course, the array can contain only a single plugin). This is your opportunity to enable support for CException support, which will add a check for unhandled exceptions in each test, reporting a failure if one is detected. To enable this feature using Ruby:</p>
<div class="fragment"><div class="line">:plugins =&gt; [ :cexception ]</div>
</div><!-- fragment --><p>Or as a yaml file:</p>
<div class="fragment"><div class="line">:plugins:</div>
<div class="line">  -:cexception</div>
</div><!-- fragment --><p>If you are using CMock, it is very likely that you are already passing an array of plugins to CMock. You can just use the same array here.</p>
<p>This script will just ignore the plugins that don't require additional support.</p>
<p>This option can also be specified at the command prompt as <code>--cexception</code></p>
<h4><a class="anchor" id="autotoc_md327"></a>
<code>:include_extensions</code></h4>
<p>This option specifies the pattern for matching acceptable header file extensions. By default it will accept hpp, hh, H, and h files. If you need a different combination of files to search, update this from the default &lsquo;&rsquo;(?:hpp|hh|H|h)'`.</p>
<h4><a class="anchor" id="autotoc_md328"></a>
<code>:source_extensions</code></h4>
<p>This option specifies the pattern for matching acceptable source file extensions. By default it will accept cpp, cc, C, c, and ino files. If you need a different combination of files to search, update this from the default &lsquo;&rsquo;(?:cpp|cc|ino|C|c)'`.</p>
<h4><a class="anchor" id="autotoc_md329"></a>
<code>:use_param_tests</code></h4>
<p>This option enables parameterized test usage. That tests accepts arguments from <code>TEST_CASE</code> and <code>TEST_RANGE</code> macros, that are located above current test definition. By default, Unity assumes, that parameterized tests are disabled.</p>
<p>Few usage examples can be found in <code>/test/tests/test_unity_parameterized.c</code> file.</p>
<p>You should define <code>UNITY_SUPPORT_TEST_CASES</code> macro for tests success compiling, if you enable current option.</p>
<p>You can see list of supported macros list in the Parameterized tests provided macros section that follows.</p>
<p>This option can also be specified at the command prompt as <code>--use_param_tests=1</code></p>
<h4><a class="anchor" id="autotoc_md330"></a>
<code>:cmdline_args</code></h4>
<p>When set to <code>true</code>, the generated test runner can accept a number of options to modify how the test(s) are run.</p>
<p>Ensure Unity is compiled with <code>UNITY_USE_COMMAND_LINE_ARGS</code> defined or else the required functions will not exist.</p>
<p>These are the available options:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>-l</code>   </td><td class="markdownTableBodyNone">List all tests and exit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>-f NAME</code>   </td><td class="markdownTableBodyNone">Filter to run only tests whose name includes NAME    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>-n NAME</code>   </td><td class="markdownTableBodyNone">Run only the test named NAME    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>-h</code>   </td><td class="markdownTableBodyNone">show the Help menu that lists these options    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>-q</code>   </td><td class="markdownTableBodyNone">Quiet/decrease verbosity    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>-v</code>   </td><td class="markdownTableBodyNone">increase Verbosity    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>-x NAME</code>   </td><td class="markdownTableBodyNone">eXclude tests whose name includes NAME   </td></tr>
</table>
<h4><a class="anchor" id="autotoc_md331"></a>
<code>:setup_name</code></h4>
<p>Override the default test <code>setUp</code> function name.</p>
<p>This option can also be specified at the command prompt as <code>--setup_name=""</code></p>
<h4><a class="anchor" id="autotoc_md332"></a>
<code>:teardown_name</code></h4>
<p>Override the default test <code>tearDown</code> function name.</p>
<p>This option can also be specified at the command prompt as <code>--teardown_name=""</code></p>
<h4><a class="anchor" id="autotoc_md333"></a>
<code>:test_reset_name</code></h4>
<p>Override the default test <code>resetTest</code> function name.</p>
<p>This option can also be specified at the command prompt as <code>--test_reset_name=""</code></p>
<h4><a class="anchor" id="autotoc_md334"></a>
<code>:test_verify_name</code></h4>
<p>Override the default test <code>verifyTest</code> function name.</p>
<p>This option can also be specified at the command prompt as <code>--test_verify_name=""</code></p>
<h4><a class="anchor" id="autotoc_md335"></a>
<code>:main_name</code></h4>
<p>Override the test's <code><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function to execute command processor tests.">main()</a></code> function name (from <code>main</code> to whatever is specified). The sentinel value <code>:auto</code> will use the test's filename with the <code>.c</code> extension removed prefixed with <code>main_</code> as the "main" function.</p>
<p>To clarify, if <code>:main_name == :auto</code> and the test filename is "test_my_project.c", then the generated function name will be <code>main_test_my_project(int argc, char** argv)</code>.</p>
<p>This option can also be specified at the command prompt as <code>--main_name=""</code></p>
<h4><a class="anchor" id="autotoc_md336"></a>
<code>main_export_decl</code></h4>
<p>Provide any <code>cdecl</code> for the <code><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function to execute command processor tests.">main()</a></code> test function. Is empty by default.</p>
<h4><a class="anchor" id="autotoc_md337"></a>
<code>:omit_begin_end</code></h4>
<p>If <code>true</code>, the <code>UnityBegin</code> and <code>UnityEnd</code> function will not be called for Unity test state setup and cleanup.</p>
<p>This option can also be specified at the command prompt as <code>--omit_begin_end</code></p>
<h4><a class="anchor" id="autotoc_md338"></a>
<code>:shuffle_tests</code></h4>
<p>If <code>true</code>, the test execution order will be shuffled. Is <code>false</code> by default.</p>
<p>This option can also be specified at the command prompt as <code>--shuffle_tests</code></p>
<h4><a class="anchor" id="autotoc_md339"></a>
<code>:rng_seed</code></h4>
<p>If set to some positive integer value, said value will be used as the seed value passed to the <code>srand</code> function. Otherwise, if not set to any value, <code>time(NULL)</code> will be used as the seed value.</p>
<p>Only applicable if <code>:shuffle_tests</code> is set to <code>true</code>.</p>
<p>This option can also be specified at the command prompt as <code>--rng_seed</code></p>
<h3><a class="anchor" id="autotoc_md340"></a>
Parameterized tests provided macros</h3>
<p>Unity provides support for few param tests generators, that can be combined with each other. You must define test function as usual C function with usual C arguments, and test generator will pass what you tell as a list of arguments.</p>
<p>Let's show how all of them works on the following test function definitions:</p>
<div class="fragment"><div class="line"><span class="comment">/* Place your test generators here, usually one generator per one or few lines */</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="test__unity__parameterizedDemo_8c.html#a335ae09582b96c6249c6d0b17ef98dcc">test_demoParamFunction</a>(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b, <span class="keywordtype">int</span> <a class="code hl_variable" href="test__unity__parameterized_8c.html#a2fc627b56c26c54e1e919c187689f0de">c</a>)</div>
<div class="line">{</div>
<div class="line">  <a class="code hl_define" href="unity_8h.html#a17a7a047b97438f6d7156de109561a56">TEST_ASSERT_GREATER_THAN_INT</a>(a + b, <a class="code hl_variable" href="test__unity__parameterized_8c.html#a2fc627b56c26c54e1e919c187689f0de">c</a>);</div>
<div class="line">}</div>
<div class="ttc" id="atest__unity__parameterizedDemo_8c_html_a335ae09582b96c6249c6d0b17ef98dcc"><div class="ttname"><a href="test__unity__parameterizedDemo_8c.html#a335ae09582b96c6249c6d0b17ef98dcc">test_demoParamFunction</a></div><div class="ttdeci">void test_demoParamFunction(int a, int b, int c)</div><div class="ttdef"><b>Definition</b> test_unity_parameterizedDemo.c:25</div></div>
<div class="ttc" id="atest__unity__parameterized_8c_html_a2fc627b56c26c54e1e919c187689f0de"><div class="ttname"><a href="test__unity__parameterized_8c.html#a2fc627b56c26c54e1e919c187689f0de">c</a></div><div class="ttdeci">float char c</div><div class="ttdef"><b>Definition</b> test_unity_parameterized.c:279</div></div>
<div class="ttc" id="aunity_8h_html_a17a7a047b97438f6d7156de109561a56"><div class="ttname"><a href="unity_8h.html#a17a7a047b97438f6d7156de109561a56">TEST_ASSERT_GREATER_THAN_INT</a></div><div class="ttdeci">#define TEST_ASSERT_GREATER_THAN_INT(threshold, actual)</div><div class="ttdef"><b>Definition</b> unity.h:189</div></div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md341"></a>
<code>TEST_CASE</code></h4>
<p>Test case is a basic generator, that can be used for param testing. One call of that macro will generate only one call for test function. It can be used with different args, such as numbers, enums, strings, global variables, another preprocessor defines.</p>
<p>If we use replace comment before test function with the following code:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(1, 2, 5)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(10, 7, 20)</div>
<div class="ttc" id="atest__unity__parameterizedDemo_8c_html_abd6e2aec703006b3da62cf7860c9808f"><div class="ttname"><a href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a></div><div class="ttdeci">#define TEST_CASE(...)</div><div class="ttdef"><b>Definition</b> test_unity_parameterizedDemo.c:12</div></div>
</div><!-- fragment --><p>script will generate 2 test calls:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="test__unity__parameterizedDemo_8c.html#a335ae09582b96c6249c6d0b17ef98dcc">test_demoParamFunction</a>(1, 2, 5);</div>
<div class="line"><a class="code hl_function" href="test__unity__parameterizedDemo_8c.html#a335ae09582b96c6249c6d0b17ef98dcc">test_demoParamFunction</a>(10, 7, 20);</div>
</div><!-- fragment --><p>That calls will be wrapped with <code>setUp</code>, <code>tearDown</code> and other usual Unity calls, as for independent unit tests. The following output can be generated after test executable startup:</p>
<div class="fragment"><div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(1, 2, 5):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(10, 7, 20):PASS</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md342"></a>
<code>TEST_RANGE</code></h4>
<p>Test range is an advanced generator. It single call can be converted to zero, one or few <code>TEST_CASE</code> equivalent commands.</p>
<p>That generator can be used for creating numeric ranges in decimal representation only: integers &amp; floating point numbers. It uses few formats for every parameter:</p>
<ol type="1">
<li><code>[start, stop, step]</code> is stop-inclusive format</li>
<li><code>&lt;start, stop, step&gt;</code> is stop-exclusive formats</li>
</ol>
<p>Format providers 1 and 2 accept only three arguments:</p>
<ul>
<li><code>start</code> is start number</li>
<li><code>stop</code> is end number (can or cannot exists in result sequence for format 1, will be always skipped for format 2)</li>
<li><code>step</code> is incrementing step: can be either positive or negative value.</li>
</ul>
<p>Let's use our <code>test_demoParamFunction</code> test for checking, what ranges will be generated for our single <code>TEST_RANGE</code> row:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#a17336e6a08dd02a52aca6261e4f63bf5">TEST_RANGE</a>([3, 4, 1], [10, 5, -2], &lt;30, 31, 1&gt;)</div>
<div class="ttc" id="atest__unity__parameterizedDemo_8c_html_a17336e6a08dd02a52aca6261e4f63bf5"><div class="ttname"><a href="test__unity__parameterizedDemo_8c.html#a17336e6a08dd02a52aca6261e4f63bf5">TEST_RANGE</a></div><div class="ttdeci">#define TEST_RANGE(...)</div><div class="ttdef"><b>Definition</b> test_unity_parameterizedDemo.c:15</div></div>
</div><!-- fragment --><p>Tests execution output will be similar to that text:</p>
<div class="fragment"><div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(3, 10, 30):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(3, 8, 30):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(3, 6, 30):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(4, 10, 30):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(4, 8, 30):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:14:test_demoParamFunction(4, 6, 30):PASS</div>
</div><!-- fragment --><p>As we can see:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Possible values   </th><th class="markdownTableHeadNone">Total of values   </th><th class="markdownTableHeadNone">Format number    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>a</code>   </td><td class="markdownTableBodyNone"><code>[3, 4, 1]</code>   </td><td class="markdownTableBodyNone"><code>3</code>, <code>4</code>   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Format 1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>b</code>   </td><td class="markdownTableBodyNone"><code>[10, 5, -2]</code>   </td><td class="markdownTableBodyNone"><code>10</code>, <code>8</code>, <code>6</code>   </td><td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">Format 1, negative step, end number is not included    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>c</code>   </td><td class="markdownTableBodyNone"><code>&lt;30, 31, 1&gt;</code>   </td><td class="markdownTableBodyNone"><code>30</code>   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Format 2   </td></tr>
</table>
<p><em>Note</em>, that format 2 also supports negative step.</p>
<p>We totally have 2 * 3 * 1 = 6 equal test cases, that can be written as following:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 10, 30)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 8, 30)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 6, 30)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 10, 30)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 8, 30)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 6, 30)</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md343"></a>
<code>TEST_MATRIX</code></h4>
<p>Test matix is an advanced generator. It single call can be converted to zero, one or few <code>TEST_CASE</code> equivalent commands.</p>
<p>That generator will create tests for all cobinations of the provided list. Each argument has to be given as a list of one or more elements in the format <code>[&lt;parm1&gt;, &lt;param2&gt;, ..., &lt;paramN-1&gt;, &lt;paramN&gt;]</code>.</p>
<p>All parameters supported by the <code>TEST_CASE</code> is supported as arguments:</p><ul>
<li>Numbers incl type specifiers e.g. <code>&lt;1&gt;</code>, <code>&lt;1u&gt;</code>, <code>&lt;1l&gt;</code>, <code>&lt;2.3&gt;</code>, or <code>&lt;2.3f&gt;</code></li>
<li>Strings incl string concatianion e.g. <code>&lt;"string"&gt;</code>, or <code>&lt;"partial" "string"&gt;</code></li>
<li>Chars e.g. &lsquo;&lt;'c&rsquo;&gt;<code></code></li>
<li><code>Enums e.g.</code>&lt;ENUM_NAME&gt;<code></code></li>
<li><code>Elements of arrays e.g.</code>&lt;data[0]&gt;`</li>
</ul>
<p>Let's use our <code>test_demoParamFunction</code> test for checking, what ranges will be generated for our single <code>TEST_RANGE</code> row:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#a66dfd8ff7fb8ba4e42c5258b96753e46">TEST_MATRIX</a>([3, 4, 7], [10, 8, 2, 1],[30u, 20.0f])</div>
<div class="ttc" id="atest__unity__parameterizedDemo_8c_html_a66dfd8ff7fb8ba4e42c5258b96753e46"><div class="ttname"><a href="test__unity__parameterizedDemo_8c.html#a66dfd8ff7fb8ba4e42c5258b96753e46">TEST_MATRIX</a></div><div class="ttdeci">#define TEST_MATRIX(...)</div><div class="ttdef"><b>Definition</b> test_unity_parameterizedDemo.c:18</div></div>
</div><!-- fragment --><p>Tests execution output will be similar to that text:</p>
<div class="fragment"><div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 10, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 10, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 8, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 8, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 2, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 2, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 1, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(3, 1, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 10, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 10, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 8, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 8, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 2, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 2, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 1, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(4, 1, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 10, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 10, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 8, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 8, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 2, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 2, 20.0f):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 1, 30u):PASS</div>
<div class="line">tests/test_unity_parameterizedDemo.c:18:test_demoParamFunction(7, 1, 20.0f):PASS</div>
</div><!-- fragment --><p>As we can see:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Format   </th><th class="markdownTableHeadNone">Count of values    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>a</code>   </td><td class="markdownTableBodyNone"><code>[3, 4, 7]</code>   </td><td class="markdownTableBodyNone">2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>b</code>   </td><td class="markdownTableBodyNone"><code>[10, 8, 2, 1]</code>   </td><td class="markdownTableBodyNone">4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>c</code>   </td><td class="markdownTableBodyNone"><code>[30u, 20.0f]</code>   </td><td class="markdownTableBodyNone">2   </td></tr>
</table>
<p>We totally have 2 * 4 * 2 = 16 equal test cases, that can be written as following:</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 10, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 10, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 8, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 8, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 2, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 2, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 1, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(3, 1, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 10, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 10, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 8, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 8, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 2, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 2, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 1, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(4, 1, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 10, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 10, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 8, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 8, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 2, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 2, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 1, 30u)</div>
<div class="line"><a class="code hl_define" href="test__unity__parameterizedDemo_8c.html#abd6e2aec703006b3da62cf7860c9808f">TEST_CASE</a>(7, 1, 20.0<a class="code hl_variable" href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a>)</div>
<div class="ttc" id="aunity_8c_html_af900396d7b72ff2a7002e8befe8cf8f1"><div class="ttname"><a href="unity_8c.html#af900396d7b72ff2a7002e8befe8cf8f1">f</a></div><div class="ttdeci">float f</div><div class="ttdef"><b>Definition</b> unity.c:1835</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md344"></a>
<code>unity_test_summary.rb</code></h2>
<p>A Unity test file contains one or more test case functions. Each test case can pass, fail, or be ignored. Each test file is run individually producing results for its collection of test cases. A given project will almost certainly be composed of multiple test files. Therefore, the suite of tests is comprised of one or more test cases spread across one or more test files. This script aggregates individual test file results to generate a summary of all executed test cases. The output includes how many tests were run, how many were ignored, and how many failed. In addition, the output includes a listing of which specific tests were ignored and failed. A good example of the breadth and details of these results can be found in the <code>examples</code> directory. Intentionally ignored and failing tests in this project generate corresponding entries in the summary report.</p>
<p>If you're interested in other (prettier?) output formats, check into the <a href="http://www.throwtheswitch.org/ceedling">Ceedling</a> build tool project that works with Unity and CMock and supports xunit-style xml as well as other goodies.</p>
<p>This script assumes the existence of files ending with the extensions <code>.testpass</code> and <code>.testfail</code>. The contents of these files includes the test results summary corresponding to each test file executed with the extension set according to the presence or absence of failures for that test file. The script searches a specified path for these files, opens each one it finds, parses the results, and aggregates and prints a summary. Calling it from the command line looks like this:</p>
<div class="fragment"><div class="line">ruby unity_test_summary.rb build/test/</div>
</div><!-- fragment --><p>You can optionally specify a root path as well. This is really helpful when you are using relative paths in your tools' setup, but you want to pull the summary into an IDE like Eclipse for clickable shortcuts.</p>
<div class="fragment"><div class="line">ruby unity_test_summary.rb build/test/ ~/projects/myproject/</div>
</div><!-- fragment --><p>Or, if you're more of a Windows sort of person:</p>
<div class="fragment"><div class="line">ruby unity_test_summary.rb build\teat\ C:\projects\myproject\</div>
</div><!-- fragment --><p>When configured correctly, you'll see a final summary, like so:</p>
<div class="fragment"><div class="line">--------------------------</div>
<div class="line">UNITY IGNORED TEST SUMMARY</div>
<div class="line">--------------------------</div>
<div class="line">blah.c:22:test_sandwiches_should_HaveBreadOnTwoSides:IGNORE</div>
<div class="line"> </div>
<div class="line">-------------------------</div>
<div class="line">UNITY FAILED TEST SUMMARY</div>
<div class="line">-------------------------</div>
<div class="line">blah.c:87:test_sandwiches_should_HaveCondiments:FAIL:Expected 1 was 0</div>
<div class="line">meh.c:38:test_soda_should_BeCalledPop:FAIL:Expected &quot;pop&quot; was &quot;coke&quot;</div>
<div class="line"> </div>
<div class="line">--------------------------</div>
<div class="line">OVERALL UNITY TEST SUMMARY</div>
<div class="line">--------------------------</div>
<div class="line">45 TOTAL TESTS 2 TOTAL FAILURES 1 IGNORED</div>
</div><!-- fragment --><p>How convenient is that?</p>
<p><em>Find The Latest of This And More at <a href="https://throwtheswitch.org">ThrowTheSwitch.org</a></em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
