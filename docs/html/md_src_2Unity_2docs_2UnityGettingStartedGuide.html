<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMD Processor - SETR: Unity - Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CMD Processor - SETR<span id="projectnumber">&#160;1.2</span>
   </div>
   <div id="projectbrief">Second Project for the SETR class of 2024-2025 at Universidade of Aveiro</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_src_2Unity_2docs_2UnityGettingStartedGuide.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Unity - Getting Started</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md301"></a></p>
<h1><a class="anchor" id="autotoc_md302"></a>
Welcome</h1>
<p>Congratulations. You're now the proud owner of your very own pile of bits! What are you going to do with all these ones and zeros? This document should be able to help you decide just that.</p>
<p>Unity is a unit test framework. The goal has been to keep it small and functional. The core Unity test framework is three files: a single C file and a couple header files. These team up to provide functions and macros to make testing easier.</p>
<p>Unity was designed to be cross-platform. It works hard to stick with C standards while still providing support for the many embedded C compilers that bend the rules. Unity has been used with many compilers, including GCC, IAR, Clang, Green Hills, Microchip, and MS Visual Studio. It's not much work to get it to work with a new target.</p>
<h2><a class="anchor" id="autotoc_md303"></a>
Overview of the Documents</h2>
<h3><a class="anchor" id="autotoc_md304"></a>
Unity Assertions reference</h3>
<p>This document will guide you through all the assertion options provided by Unity. This is going to be your unit testing bread and butter. You'll spend more time with assertions than any other part of Unity.</p>
<h3><a class="anchor" id="autotoc_md305"></a>
Unity Assertions Cheat Sheet</h3>
<p>This document contains an abridged summary of the assertions described in the previous document. It's perfect for printing and referencing while you familiarize yourself with Unity's options.</p>
<h3><a class="anchor" id="autotoc_md306"></a>
Unity Configuration Guide</h3>
<p>This document is the one to reference when you are going to use Unity with a new target or compiler. It'll guide you through the configuration options and will help you customize your testing experience to meet your needs.</p>
<h3><a class="anchor" id="autotoc_md307"></a>
Unity Helper Scripts</h3>
<p>This document describes the helper scripts that are available for simplifying your testing workflow. It describes the collection of optional Ruby scripts included in the auto directory of your Unity installation. Neither Ruby nor these scripts are necessary for using Unity. They are provided as a convenience for those who wish to use them.</p>
<h3><a class="anchor" id="autotoc_md308"></a>
Unity License</h3>
<p>What's an open source project without a license file? This brief document describes the terms you're agreeing to when you use this software. Basically, we want it to be useful to you in whatever context you want to use it, but please don't blame us if you run into problems.</p>
<h2><a class="anchor" id="autotoc_md309"></a>
Overview of the Folders</h2>
<p>If you have obtained Unity through Github or something similar, you might be surprised by just how much stuff you suddenly have staring you in the face. Don't worry, Unity itself is very small. The rest of it is just there to make your life easier. You can ignore it or use it at your convenience. Here's an overview of everything in the project.</p>
<ul>
<li><code>src</code> - This is the code you care about! This folder contains a C file and two header files. These three files <em>are</em> Unity.</li>
<li><code>docs</code> - You're reading this document, so it's possible you have found your way into this folder already. This is where all the handy documentation can be found.</li>
<li><code>examples</code> - This contains a few examples of using Unity.</li>
<li><code>extras</code> - These are optional add ons to Unity that are not part of the core project. If you've reached us through James Grenning's book, you're going to want to look here.</li>
<li><code>test</code> - This is how Unity and its scripts are all tested. If you're just using Unity, you'll likely never need to go in here. If you are the lucky team member who gets to port Unity to a new toolchain, this is a good place to verify everything is configured properly.</li>
<li><code>auto</code> - Here you will find helpful Ruby scripts for simplifying your test workflow. They are purely optional and are not required to make use of Unity.</li>
</ul>
<h1><a class="anchor" id="autotoc_md310"></a>
How to Create A Test File</h1>
<p>Test files are C files. Most often you will create a single test file for each C module that you want to test. The test file should include <a class="el" href="unity_8h.html">unity.h</a> and the header for your C module to be tested.</p>
<p>Next, a test file will include a <code><a class="el" href="tests_8c.html#a95c834d6178047ce9e1bce7cbfea2836" title="Set up function executed before each test.">setUp()</a></code> and <code><a class="el" href="tests_8c.html#a9909011e5fea0c018842eec4d93d0662" title="Tear down function executed after each test.">tearDown()</a></code> function. The setUp function can contain anything you would like to run before each test. The tearDown function can contain anything you would like to run after each test. Both functions accept no arguments and return nothing. You may leave either or both of these blank if you have no need for them.</p>
<p>If you're using Ceedling or the test runner generator script, you may leave these off completely. Not sure? Give it a try. If your compiler complains that it can't find setUp or tearDown when it links, you'll know you need to at least include an empty function for these.</p>
<p>The majority of the file will be a series of test functions. Test functions follow the convention of starting with the word "test_" or "spec_". You don't HAVE to name them this way, but it makes it clear what functions are tests for other developers. Also, the automated scripts that come with Unity or Ceedling will default to looking for test functions to be prefixed this way. Test functions take no arguments and return nothing. All test accounting is handled internally in Unity.</p>
<p>Finally, at the bottom of your test file, you will write a <code><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function to execute command processor tests.">main()</a></code> function. This function will call <code><a class="el" href="unity__internals_8h.html#aaad15a5d10e50a412d0a6851d0e5091a">UNITY_BEGIN()</a></code>, then <code>RUN_TEST</code> for each test, and finally <code><a class="el" href="unity__internals_8h.html#aa519129d3af737eb796fc91720fae26a">UNITY_END()</a></code>. This is what will actually trigger each of those test functions to run, so it is important that each function gets its own <code>RUN_TEST</code> call.</p>
<p>Remembering to add each test to the main function can get to be tedious. If you enjoy using helper scripts in your build process, you might consider making use of our handy <a href="../auto/generate_test_runner.rb">generate_test_runner.rb</a> script. This will create the main function and all the calls for you, assuming that you have followed the suggested naming conventions. In this case, there is no need for you to include the main function in your test file at all.</p>
<p>When you're done, your test file will look something like this:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="unity_8h.html">unity.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;file_to_test.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="tests_8c.html#a95c834d6178047ce9e1bce7cbfea2836">setUp</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// set stuff up here</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="tests_8c.html#a9909011e5fea0c018842eec4d93d0662">tearDown</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// clean stuff up here</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_function_should_doBlahAndBlah(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">//test stuff</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> test_function_should_doAlsoDoBlah(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">//more test stuff</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// not needed when using generate_test_runner.rb</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <a class="code hl_define" href="unity__internals_8h.html#aaad15a5d10e50a412d0a6851d0e5091a">UNITY_BEGIN</a>();</div>
<div class="line">    <a class="code hl_define" href="example__1_2test_2test__runners_2TestProductionCode2__Runner_8c.html#af3a9b37ea192d5f498c7d699d65ad530">RUN_TEST</a>(test_function_should_doBlahAndBlah);</div>
<div class="line">    <a class="code hl_define" href="example__1_2test_2test__runners_2TestProductionCode2__Runner_8c.html#af3a9b37ea192d5f498c7d699d65ad530">RUN_TEST</a>(test_function_should_doAlsoDoBlah);</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="unity__internals_8h.html#aa519129d3af737eb796fc91720fae26a">UNITY_END</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aexample__1_2test_2test__runners_2TestProductionCode2__Runner_8c_html_af3a9b37ea192d5f498c7d699d65ad530"><div class="ttname"><a href="example__1_2test_2test__runners_2TestProductionCode2__Runner_8c.html#af3a9b37ea192d5f498c7d699d65ad530">RUN_TEST</a></div><div class="ttdeci">#define RUN_TEST(TestFunc, TestLineNum)</div><div class="ttdef"><b>Definition</b> TestProductionCode2_Runner.c:4</div></div>
<div class="ttc" id="amain_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main function to execute command processor tests.</div><div class="ttdef"><b>Definition</b> main.c:38</div></div>
<div class="ttc" id="atests_8c_html_a95c834d6178047ce9e1bce7cbfea2836"><div class="ttname"><a href="tests_8c.html#a95c834d6178047ce9e1bce7cbfea2836">setUp</a></div><div class="ttdeci">void setUp(void)</div><div class="ttdoc">Set up function executed before each test.</div><div class="ttdef"><b>Definition</b> tests.c:19</div></div>
<div class="ttc" id="atests_8c_html_a9909011e5fea0c018842eec4d93d0662"><div class="ttname"><a href="tests_8c.html#a9909011e5fea0c018842eec4d93d0662">tearDown</a></div><div class="ttdeci">void tearDown(void)</div><div class="ttdoc">Tear down function executed after each test.</div><div class="ttdef"><b>Definition</b> tests.c:27</div></div>
<div class="ttc" id="aunity_8h_html"><div class="ttname"><a href="unity_8h.html">unity.h</a></div></div>
<div class="ttc" id="aunity__internals_8h_html_aa519129d3af737eb796fc91720fae26a"><div class="ttname"><a href="unity__internals_8h.html#aa519129d3af737eb796fc91720fae26a">UNITY_END</a></div><div class="ttdeci">#define UNITY_END()</div><div class="ttdef"><b>Definition</b> unity_internals.h:858</div></div>
<div class="ttc" id="aunity__internals_8h_html_aaad15a5d10e50a412d0a6851d0e5091a"><div class="ttname"><a href="unity__internals_8h.html#aaad15a5d10e50a412d0a6851d0e5091a">UNITY_BEGIN</a></div><div class="ttdeci">#define UNITY_BEGIN()</div><div class="ttdef"><b>Definition</b> unity_internals.h:854</div></div>
</div><!-- fragment --><p>It's possible that you will need more customization than this, eventually. For that sort of thing, you're going to want to look at the configuration guide. This should be enough to get you going, though.</p>
<h2><a class="anchor" id="autotoc_md311"></a>
Running Test Functions</h2>
<p>When writing your own <code><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function to execute command processor tests.">main()</a></code> functions, for a test-runner. There are two ways to execute the test.</p>
<p>The classic variant</p>
<div class="fragment"><div class="line"> c</div>
<div class="line">RUN_TEST(func, linenum)</div>
</div><!-- fragment --><p>Or its simpler replacement that starts at the beginning of the function.</p>
<div class="fragment"><div class="line"> c</div>
<div class="line">RUN_TEST(func)</div>
</div><!-- fragment --><p>These macros perform the necessary setup before the test is called and handles clean-up and result tabulation afterwards.</p>
<h2><a class="anchor" id="autotoc_md312"></a>
Ignoring Test Functions</h2>
<p>There are times when a test is incomplete or not valid for some reason. At these times, TEST_IGNORE can be called. Control will immediately be returned to the caller of the test, and no failures will be returned. This is useful when your test runners are automatically generated.</p>
<div class="fragment"><div class="line"> c</div>
<div class="line">TEST_IGNORE()</div>
</div><!-- fragment --><p>Ignore this test and return immediately</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="unity_8h.html#aca1a170cd0581bacd7c918574f6838de">TEST_IGNORE_MESSAGE</a> (message)</div>
<div class="ttc" id="aunity_8h_html_aca1a170cd0581bacd7c918574f6838de"><div class="ttname"><a href="unity_8h.html#aca1a170cd0581bacd7c918574f6838de">TEST_IGNORE_MESSAGE</a></div><div class="ttdeci">#define TEST_IGNORE_MESSAGE(message)</div><div class="ttdef"><b>Definition</b> unity.h:104</div></div>
</div><!-- fragment --><p>Ignore this test and return immediately. Output a message stating why the test was ignored.</p>
<h2><a class="anchor" id="autotoc_md313"></a>
Aborting Tests</h2>
<p>There are times when a test will contain an infinite loop on error conditions, or there may be reason to escape from the test early without executing the rest of the test. A pair of macros support this functionality in Unity. The first <code>TEST_PROTECT</code> sets up the feature, and handles emergency abort cases. <code>TEST_ABORT</code> can then be used at any time within the tests to return to the last <code>TEST_PROTECT</code> call.</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="unity__internals_8h.html#a61d21043921ebc1c2ee49543fc100f9a">TEST_PROTECT</a>()</div>
<div class="ttc" id="aunity__internals_8h_html_a61d21043921ebc1c2ee49543fc100f9a"><div class="ttname"><a href="unity__internals_8h.html#a61d21043921ebc1c2ee49543fc100f9a">TEST_PROTECT</a></div><div class="ttdeci">#define TEST_PROTECT()</div><div class="ttdef"><b>Definition</b> unity_internals.h:789</div></div>
</div><!-- fragment --><p>Setup and Catch macro</p>
<div class="fragment"><div class="line"><a class="code hl_define" href="unity__internals_8h.html#a35ff53d9ad3c4ec9d611fdf04319a23b">TEST_ABORT</a>()</div>
<div class="ttc" id="aunity__internals_8h_html_a35ff53d9ad3c4ec9d611fdf04319a23b"><div class="ttname"><a href="unity__internals_8h.html#a35ff53d9ad3c4ec9d611fdf04319a23b">TEST_ABORT</a></div><div class="ttdeci">#define TEST_ABORT()</div><div class="ttdef"><b>Definition</b> unity_internals.h:799</div></div>
</div><!-- fragment --><p>Abort Test macro</p>
<p>Example:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_define" href="unity__internals_8h.html#a61d21043921ebc1c2ee49543fc100f9a">TEST_PROTECT</a>())</div>
<div class="line">    {</div>
<div class="line">        MyTest();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>If MyTest calls <code>TEST_ABORT</code>, program control will immediately return to <code>TEST_PROTECT</code> with a return value of zero.</p>
<h1><a class="anchor" id="autotoc_md314"></a>
How to Build and Run A Test File</h1>
<p>This is the single biggest challenge to picking up a new unit testing framework, at least in a language like C or C++. These languages are REALLY good at getting you "close to the metal" (why is the phrase metal? Wouldn't it be more accurate to say "close to the silicon"?). While this feature is usually a good thing, it can make testing more challenging.</p>
<p>You have two really good options for toolchains. Depending on where you're coming from, it might surprise you that neither of these options is running the unit tests on your hardware. There are many reasons for this, but here's a short version:</p>
<ul>
<li>On hardware, you have too many constraints (processing power, memory, etc),</li>
<li>On hardware, you don't have complete control over all registers,</li>
<li>On hardware, unit testing is more challenging,</li>
<li>Unit testing isn't System testing. Keep them separate.</li>
</ul>
<p>Instead of running your tests on your actual hardware, most developers choose to develop them as native applications (using gcc or MSVC for example) or as applications running on a simulator. Either is a good option. Native apps have the advantages of being faster and easier to set up. Simulator apps have the advantage of working with the same compiler as your target application. The options for configuring these are discussed in the configuration guide.</p>
<p>To get either to work, you might need to make a few changes to the file containing your register set (discussed later).</p>
<p>In either case, a test is built by linking unity, the test file, and the C file(s) being tested. These files create an executable which can be run as the test set for that module. Then, this process is repeated for the next test file. This flexibility of separating tests into individual executables allows us to much more thoroughly unit test our system and it keeps all the test code out of our final release!</p>
<p><em>Find The Latest of This And More at <a href="https://throwtheswitch.org">ThrowTheSwitch.org</a></em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
